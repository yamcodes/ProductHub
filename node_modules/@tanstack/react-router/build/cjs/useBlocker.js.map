{"version":3,"file":"useBlocker.js","sources":["../../src/useBlocker.tsx"],"sourcesContent":["import * as React from 'react'\nimport { ReactNode } from './route'\nimport { useRouter } from './RouterProvider'\n\nexport function useBlocker(\n  message: string,\n  condition: boolean | any = true,\n): void {\n  const { history } = useRouter()\n\n  React.useEffect(() => {\n    if (!condition) return\n\n    let unblock = history.block((retry, cancel) => {\n      if (window.confirm(message)) {\n        unblock()\n        retry()\n      }\n    })\n\n    return unblock\n  })\n}\n\nexport function Block({ message, condition, children }: PromptProps) {\n  useBlocker(message, condition)\n  return (children ?? null) as ReactNode\n}\n\nexport type PromptProps = {\n  message: string\n  condition?: boolean | any\n  children?: ReactNode\n}\n"],"names":["useBlocker","message","condition","history","useRouter","React","useEffect","unblock","block","retry","cancel","window","confirm","Block","children"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIO,SAASA,UAAUA,CACxBC,OAAe,EACfC,SAAwB,GAAG,IAAI,EACzB;EACN,MAAM;AAAEC,IAAAA,OAAAA;GAAS,GAAGC,wBAAS,EAAE,CAAA;EAE/BC,gBAAK,CAACC,SAAS,CAAC,MAAM;IACpB,IAAI,CAACJ,SAAS,EAAE,OAAA;IAEhB,IAAIK,OAAO,GAAGJ,OAAO,CAACK,KAAK,CAAC,CAACC,KAAK,EAAEC,MAAM,KAAK;AAC7C,MAAA,IAAIC,MAAM,CAACC,OAAO,CAACX,OAAO,CAAC,EAAE;AAC3BM,QAAAA,OAAO,EAAE,CAAA;AACTE,QAAAA,KAAK,EAAE,CAAA;AACT,OAAA;AACF,KAAC,CAAC,CAAA;AAEF,IAAA,OAAOF,OAAO,CAAA;AAChB,GAAC,CAAC,CAAA;AACJ,CAAA;AAEO,SAASM,KAAKA,CAAC;EAAEZ,OAAO;EAAEC,SAAS;AAAEY,EAAAA,QAAAA;AAAsB,CAAC,EAAE;AACnEd,EAAAA,UAAU,CAACC,OAAO,EAAEC,SAAS,CAAC,CAAA;EAC9B,OAAQY,QAAQ,IAAI,IAAI,CAAA;AAC1B;;;;;"}